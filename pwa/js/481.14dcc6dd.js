"use strict";(self["webpackChunkfs2020map"]=self["webpackChunkfs2020map"]||[]).push([[481],{1481:(t,e,n)=>{n.r(e),n.d(e,{default:()=>N});var a=n(3673);function o(t,e,n,o,l,s){const p=(0,a.up)("map-component"),i=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p)])),_:1})}var l=n(2323);const s=(0,a._)("div",{id:"map",class:"window-width"},null,-1),p=(0,a._)("span",null,"ALT ",-1),i={class:"text-h6"},c=(0,a._)("span",null,"ft",-1),r={class:"text-center"},u=(0,a._)("span",null,"HDG ",-1),d=(0,a._)("br",null,null,-1),m={class:"text-h4"},f=(0,a._)("span",null,"GS ",-1),g={class:"text-h6"},h=(0,a._)("br",null,null,-1);function _(t,e,n,o,_,y){const w=(0,a.up)("q-page-sticky"),C=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",null,[s,(0,a.Wm)(w,{position:"top-left",offset:[18,18]},{default:(0,a.w5)((()=>[(0,a._)("div",null,[p,(0,a._)("span",i,(0,l.zw)(t.status.ALT),1),c])])),_:1}),(0,a.Wm)(w,{position:"top",offset:[18,18]},{default:(0,a.w5)((()=>[(0,a._)("div",r,[u,d,(0,a._)("span",m,(0,l.zw)(t.status.HDG),1)])])),_:1}),(0,a.Wm)(w,{position:"top-right",offset:[18,18]},{default:(0,a.w5)((()=>[(0,a._)("div",null,[f,(0,a._)("span",g,(0,l.zw)(t.status.GS),1)])])),_:1}),(0,a.Wm)(w,{position:"bottom-right",offset:[10,18]},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{round:"",class:"bg-white text-grey-8",size:"md",dense:"",icon:t.mapConfig.keepCenter?"gps_fixed":"gps_not_fixed",onClick:e[0]||(e[0]=e=>t.mapConfig.keepCenter=!t.mapConfig.keepCenter)},null,8,["icon"]),h,(0,a.Wm)(C,{round:"",class:"bg-white text-grey-8 q-mt-sm",size:"md",dense:"",icon:"public",onClick:e[1]||(e[1]=e=>t.changeMapType())})])),_:1}),(0,a.Wm)(w,{position:"bottom-left",offset:[12,18]},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{dense:"",class:"bg-white text-grey-8",icon:"delete",onClick:e[2]||(e[2]=e=>t.resetPath())})])),_:1})])}n(2100);var y=n(1959),w=n(7444),C=n(5474),k=n(8825),E=n(9151);const T=(0,a.aZ)({setup(){const{t}=(0,E.QT)(),e=(0,y.qj)({HDG:"000",GS:0,ALT:0}),n=(0,y.qj)({keepCenter:!0,mapType:"roadmap"});let o=null,l=(0,y.qj)([]);function s(){localStorage.removeItem("flightPlanCoordinates"),l=[]}function p(){"roadmap"===n.mapType?(o.setMapTypeId("hybrid"),n.mapType="hybird"):(o.setMapTypeId("roadmap"),n.mapType="roadmap")}return(0,a.bv)((async()=>{const a=(0,k.Z)(),s=[],p=[];localStorage.getItem("flightPlanCoordinates")&&(l=JSON.parse(localStorage.getItem("flightPlanCoordinates")));const i=await C.api.get("/key").catch((()=>(a.notify({message:t("map.error_message_nokey"),icon:"announcement",timeout:4e3,color:"red",position:"center"}),{data:"nokey"})));"nokey"===i.data&&(i.data=null);const c=new w.a(i.data);function r(t,e,n,a,o){u(),l.push({lat:a,lng:o}),localStorage.setItem("flightPlanCoordinates",JSON.stringify(l)),p.push(new t.maps.Polyline({path:l,geodesic:!0,strokeColor:"#66cde1",strokeOpacity:.8,strokeWeight:2,map:e})),s.push(new t.maps.Marker({position:{lat:a,lng:o},map:e,icon:n}))}function u(){s.forEach((t=>{t.setMap(null)})),p.forEach((t=>{t.setMap(null)}))}function d(t,a){return new Promise(((o,l)=>{let s=null,p=null,i=0;const c={plane:"M 1.9565564,41.694305 C 1.7174505,40.497708 1.6419973,38.448747 1.8096508,37.70494 1.8936398,37.332056 2.0796653,36.88191 2.222907,36.70461 2.4497603,36.423844 4.087816,35.47248 14.917931,29.331528 l 12.434577,-7.050718 -0.04295,-7.613412 c -0.03657,-6.4844888 -0.01164,-7.7625804 0.168134,-8.6194061 0.276129,-1.3160905 0.762276,-2.5869575 1.347875,-3.5235502 l 0.472298,-0.7553719 1.083746,-0.6085497 c 1.194146,-0.67053522 1.399524,-0.71738842 2.146113,-0.48960552 1.077005,0.3285939 2.06344,1.41299352 2.797602,3.07543322 0.462378,1.0469993 0.978731,2.7738408 1.047635,3.5036272 0.02421,0.2570284 0.06357,3.78334 0.08732,7.836246 0.02375,4.052905 0.0658,7.409251 0.09345,7.458546 0.02764,0.04929 5.600384,3.561772 12.38386,7.805502 l 12.333598,7.715871 0.537584,0.959688 c 0.626485,1.118378 0.651686,1.311286 0.459287,3.516442 -0.175469,2.011604 -0.608966,2.863924 -1.590344,3.127136 -0.748529,0.200763 -1.293144,0.03637 -10.184829,-3.07436 C 48.007733,41.72562 44.793806,40.60197 43.35084,40.098045 l -2.623567,-0.916227 -1.981212,-0.06614 c -1.089663,-0.03638 -1.985079,-0.05089 -1.989804,-0.03225 -0.0052,0.01863 -0.02396,2.421278 -0.04267,5.339183 -0.0395,6.147742 -0.143635,7.215456 -0.862956,8.845475 l -0.300457,0.680872 2.91906,1.361455 c 2.929379,1.366269 3.714195,1.835385 4.04589,2.41841 0.368292,0.647353 0.594634,2.901439 0.395779,3.941627 -0.0705,0.368571 -0.106308,0.404853 -0.765159,0.773916 L 41.4545,62.83158 39.259237,62.80426 c -6.030106,-0.07507 -16.19508,-0.495041 -16.870991,-0.697033 -0.359409,-0.107405 -0.523792,-0.227482 -0.741884,-0.541926 -0.250591,-0.361297 -0.28386,-0.522402 -0.315075,-1.52589 -0.06327,-2.03378 0.23288,-3.033615 1.077963,-3.639283 0.307525,-0.2204 4.818478,-2.133627 6.017853,-2.552345 0.247872,-0.08654 0.247455,-0.102501 -0.01855,-0.711959 -0.330395,-0.756986 -0.708622,-2.221756 -0.832676,-3.224748 -0.05031,-0.406952 -0.133825,-3.078805 -0.185533,-5.937448 -0.0517,-2.858644 -0.145909,-5.208974 -0.209316,-5.222958 -0.06341,-0.01399 -0.974464,-0.0493 -2.024551,-0.07845 L 23.247235,38.61921 18.831373,39.8906 C 4.9432155,43.88916 4.2929558,44.057819 3.4954426,43.86823 2.7487826,43.690732 2.2007966,42.916622 1.9565564,41.694305 z"};C.api.get("/dataset/navigation/").then((l=>{s=l.data.PLANE_LATITUDE,p=l.data.PLANE_LONGITUDE,i=57.295779513*l.data.PLANE_HEADING_DEGREES_TRUE;const u={path:"M 0,0 "+c.plane,fillColor:"#ff005e",fillOpacity:.9,scale:.4,anchor:new t.maps.Point(32,32),rotation:i};s&&p&&(n.keepCenter&&a.panTo({lat:s,lng:p}),e.HDG=m(l.data.PLANE_HEADING_DEGREES_TRUE),e.GS=parseInt(l.data.GROUND_VELOCITY),e.ALT=parseInt(l.data.PLANE_ALTITUDE),o(r(t,a,u,s,p)))})).catch((t=>{console.error(t)}))}))}function m(t){return parseInt(57.295779513*t).toString().padStart(3,"0")}c.load().then((function(t){o=new t.maps.Map(document.getElementById("map"),{center:{lat:-16.880506799673164,lng:145.7492009202902},zoom:14,callback:"myMap",disableDefaultUI:!0}),d(t,o),setInterval((()=>{d(t,o)}),3e3)}))})),{status:e,mapConfig:n,flightPlanCoordinates:l,resetPath:s,changeMapType:p}},mounted(){const t=document.getElementById("map"),e=window.screen.height-56;t.style.height=`${e}px`}});var I=n(4260),P=n(1007),b=n(4607),L=n(7518),S=n.n(L);const v=(0,I.Z)(T,[["render",_]]),D=v;S()(T,"components",{QPageSticky:P.Z,QBtn:b.Z});const G=(0,a.aZ)({components:{"map-component":D}});var A=n(4379);const M=(0,I.Z)(G,[["render",o]]),N=M;S()(G,"components",{QPage:A.Z})}}]);